/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
import{zod as e,PredefinedNetworkConditions as t}from"../third_party/index.js";import{ToolCategory as o}from"./categories.js";import{defineTool as n}from"./ToolDefinition.js";const i=["No emulation","Offline",...Object.keys(t)];export const emulate=n({name:"emulate",description:"Emulates various features on the selected page.",annotations:{category:o.EMULATION,readOnlyHint:!1},schema:{networkConditions:e.enum(i).optional().describe('Throttle network. Set to "No emulation" to disable. If omitted, conditions remain unchanged.'),cpuThrottlingRate:e.number().min(1).max(20).optional().describe("Represents the CPU slowdown factor. Set the rate to 1 to disable throttling. If omitted, throttling remains unchanged."),geolocation:e.object({latitude:e.number().min(-90).max(90).describe("Latitude between -90 and 90."),longitude:e.number().min(-180).max(180).describe("Longitude between -180 and 180.")}).nullable().optional().describe("Geolocation to emulate. Set to null to clear the geolocation override.")},handler:async(e,o,n)=>{const i=n.getSelectedPage(),{networkConditions:a,cpuThrottlingRate:l,geolocation:r}=e.params;if(a)if("No emulation"===a)await i.emulateNetworkConditions(null),n.setNetworkConditions(null);else if("Offline"===a)await i.emulateNetworkConditions({offline:!0,download:0,upload:0,latency:0}),n.setNetworkConditions("Offline");else if(a in t){const e=t[a];await i.emulateNetworkConditions(e),n.setNetworkConditions(a)}l&&(await i.emulateCPUThrottling(l),n.setCpuThrottlingRate(l)),void 0!==r&&(null===r?(await i.setGeolocation({latitude:0,longitude:0}),n.setGeolocation(null)):(await i.setGeolocation(r),n.setGeolocation(r)))}});