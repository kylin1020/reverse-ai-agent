/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
export function formatConsoleEventShort(e){return"issue"===e.type?`msgid=${e.consoleMessageStableId} [${e.type}] ${e.message} (count: ${e.count})`:`msgid=${e.consoleMessageStableId} [${e.type}] ${e.message} (${e.args?.length??0} args)`}export function formatConsoleEventVerbose(e,s){const n=e.item;return[`ID: ${e.consoleMessageStableId}`,`Message: ${e.type}> ${n?formatIssue(n,e.description,s):e.message}`,n?void 0:t(e)].filter(e=>!!e).join("\n")}function e(e){return"object"==typeof e?JSON.stringify(e):String(e)}function t(t){const s=function(e){const t=[...e.args??[]];return e.message||t.shift(),t}(t);if(!s.length)return"";const n=["### Arguments"];for(const[t,o]of s.entries())n.push(`Arg #${t}: ${e(o)}`);return n.join("\n")}export function formatIssue(e,t,s){const n=[];let o=t?.trim();o?.startsWith("# ")&&(o=o.substring(2).trimStart()),o&&n.push(o);const r=e.getDescription()?.links;if(r&&r.length>0){n.push("Learn more:");for(const e of r)n.push(`[${e.linkTitle}](${e.link})`)}const d=e.getAllIssues(),u=[];for(const e of d){const t=e.details();if(!t)continue;const n=structuredClone(t);let o,r;if("violatingNodeId"in t&&t.violatingNodeId&&s&&(o=s.resolveCdpElementId(t.violatingNodeId),delete n.violatingNodeId),"nodeId"in t&&t.nodeId&&s&&(o=s.resolveCdpElementId(t.nodeId),delete n.nodeId),"documentNodeId"in t&&t.documentNodeId&&s&&(o=s.resolveCdpElementId(t.documentNodeId),delete n.documentNodeId),"request"in t&&t.request&&(r=t.request.url,t.request.requestId&&s)){const e=s.resolveCdpRequestId(t.request.requestId);e&&(r=e,delete n.request.requestId)}delete n.errorType,delete n.frameId,u.push({uid:o,data:n,request:r})}return u.length&&n.push("### Affected resources"),n.push(...u.map(e=>{const t=[];return e.uid&&t.push(`uid=${e.uid}`),e.request&&t.push(("number"==typeof e.request?"reqid=":"url=")+e.request),e.data&&t.push(`data=${JSON.stringify(e.data)}`),t.join(" ")})),0===n.length?"No affected resources found":n.join("\n")}