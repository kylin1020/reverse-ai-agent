/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
import{zod as e}from"../third_party/index.js";import{ToolCategory as t}from"./categories.js";import{defineTool as a,timeoutSchema as s}from"./ToolDefinition.js";export const takeSnapshot=a({name:"take_snapshot",description:"Take a text snapshot of the currently selected page based on the a11y tree. The snapshot lists page elements along with a unique\nidentifier (uid). Always use the latest snapshot. Prefer taking a snapshot over taking a screenshot. The snapshot indicates the element selected\nin the DevTools Elements panel (if any). Supports search filtering and pagination for large pages. Use filePath to save snapshots locally for grep/rg searching.",annotations:{category:t.DEBUGGING,readOnlyHint:!1},schema:{verbose:e.boolean().optional().describe("Whether to include all possible information available in the full a11y tree. Default is false."),filePath:e.string().optional().describe("The absolute path, or a path relative to the current working directory, to save the snapshot to instead of attaching it to the response. Useful for saving large snapshots that can be searched with grep/rg tools."),search:e.string().optional().describe("Filter snapshot to only include elements matching this text (case-insensitive). Matches against element name, role, and other attributes."),pageSize:e.number().int().positive().optional().describe("Number of elements per page for pagination. If not specified, all matching elements are returned."),pageIdx:e.number().int().min(0).optional().describe("Page index (0-based) for pagination. Requires pageSize to be set.")},handler:async(e,t)=>{t.includeSnapshot({verbose:e.params.verbose??!1,filePath:e.params.filePath,search:e.params.search,pageSize:e.params.pageSize,pageIdx:e.params.pageIdx})}});export const waitFor=a({name:"wait_for",description:"Wait for the specified text to appear on the selected page.",annotations:{category:t.NAVIGATION,readOnlyHint:!0},schema:{text:e.string().describe("Text to appear on the page"),...s},handler:async(e,t,a)=>{await a.waitForTextOnPage(e.params.text,e.params.timeout),t.appendResponseLine(`Element with text "${e.params.text}" found.`),t.includeSnapshot()}});